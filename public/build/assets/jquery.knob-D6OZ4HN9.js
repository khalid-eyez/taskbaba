/*!jQuery Knob*/(function(a){typeof define=="function"&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){var o={},c=Math.max,d=Math.min;o.c={},o.c.d=a(document),o.c.t=function(t){return t.originalEvent.touches.length-1},o.o=function(){var t=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var i=function(s,h){var e;for(e in h)t.o[e]=h[e];t._carve().init(),t._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=a.extend({min:this.$.data("min")!==void 0?this.$.data("min"):0,max:this.$.data("max")!==void 0?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||this.$.attr("readonly")==="readonly",cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:this.$.data("displayinput")==null||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(s){return s},parse:function(s){return parseFloat(s)}},this.o),this.o.flip=this.o.rotation==="anticlockwise"||this.o.rotation==="acw",this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(s){var h=a(this);t.i[s]=h,t.v[s]=t.o.parse(h.val()),h.bind("change blur",function(){var e={};e[s]=h.val(),t.val(e)})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),this.v===""&&(this.v=this.o.min),this.$.bind("change blur",function(){t.val(t._validate(t.o.parse(t.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=a(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=a('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),typeof G_vmlCanvasManager<"u"&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",i).parent().bind("configure",i),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var i=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),s=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(i,s)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),this.scale!==1&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var i=!0;t.g=t.c,t.clear(),t.dH&&(i=t.dH()),i!==!1&&t.draw()},this._touch=function(i){var s=function(h){var e=t.xy2val(h.originalEvent.touches[t.t].pageX,h.originalEvent.touches[t.t].pageY);e!=t.cv&&(t.cH&&t.cH(e)===!1||(t.change(t._validate(e)),t._draw()))};return this.t=o.c.t(i),s(i),o.c.d.bind("touchmove.k",s).bind("touchend.k",function(){o.c.d.unbind("touchmove.k touchend.k"),t.val(t.cv)}),this},this._mouse=function(i){var s=function(h){var e=t.xy2val(h.pageX,h.pageY);e!=t.cv&&(t.cH&&t.cH(e)===!1||(t.change(t._validate(e)),t._draw()))};return s(i),o.c.d.bind("mousemove.k",s).bind("keyup.k",function(h){if(h.keyCode===27){if(o.c.d.unbind("mouseup.k mousemove.k keyup.k"),t.eH&&t.eH()===!1)return;t.cancel()}}).bind("mouseup.k",function(h){o.c.d.unbind("mousemove.k mouseup.k keyup.k"),t.val(t.cv)}),this},this._xy=function(){var i=this.$c.offset();return this.x=i.left,this.y=i.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(i){i.preventDefault(),t._xy()._mouse(i)}).bind("touchstart",function(i){i.preventDefault(),t._xy()._touch(i)}),this.listen()),this.relative&&a(window).resize(function(){t._carve().init(),t._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(i){return~~((i<0?-.5:.5)+i/this.o.step)*this.o.step},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(i){},this.val=function(i){},this.xy2val=function(i,s){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(i,s){var h;return i=i.substring(1,7),h=[parseInt(i.substring(0,2),16),parseInt(i.substring(2,4),16),parseInt(i.substring(4,6),16)],"rgba("+h[0]+","+h[1]+","+h[2]+","+s+")"},this.copy=function(i,s){for(var h in i)s[h]=i[h]}},o.Dial=function(){o.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=a.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t,i){if(t!=null){if(t=this.o.parse(t),i!==!1&&t!=this.v&&this.rH&&this.rH(t)===!1)return;this.cv=this.o.stopper?c(d(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw()}else return this.v},this.xy2val=function(t,i){var s,h;return s=Math.atan2(t-(this.x+this.w2),-(i-this.y-this.w2))-this.angleOffset,this.o.flip&&(s=this.angleArc-s-this.PI2),this.angleArc!=this.PI2&&s<0&&s>-.5?s=0:s<0&&(s+=this.PI2),h=~~(.5+s*(this.o.max-this.o.min)/this.angleArc)+this.o.min,this.o.stopper&&(h=c(d(h,this.o.max),this.o.min)),h},this.listen=function(){var t=this,i,s,h=function(r){r.preventDefault();var n=r.originalEvent,l=n.detail||n.wheelDeltaX,g=n.detail||n.wheelDeltaY,u=t._validate(t.o.parse(t.$.val()))+(l>0||g>0?t.o.step:l<0||g<0?-t.o.step:0);u=c(d(u,t.o.max),t.o.min),t.val(u,!1),t.rH&&(clearTimeout(i),i=setTimeout(function(){t.rH(u),i=null},100),s||(s=setTimeout(function(){i&&t.rH(u),s=null},200)))},e,f,v=1,p={37:-t.o.step,38:t.o.step,39:t.o.step,40:-t.o.step};this.$.bind("keydown",function(r){var n=r.keyCode;if(n>=96&&n<=105&&(n=r.keyCode=n-48),e=parseInt(String.fromCharCode(n)),isNaN(e)&&(n!==13&&n!==8&&n!==9&&n!==189&&(n!==190||t.$.val().match(/\./))&&r.preventDefault(),a.inArray(n,[37,38,39,40])>-1)){r.preventDefault();var l=t.o.parse(t.$.val())+p[n]*v;t.o.stopper&&(l=c(d(l,t.o.max),t.o.min)),t.change(l),t._draw(),f=window.setTimeout(function(){v*=2},30)}}).bind("keyup",function(r){isNaN(e)?f&&(window.clearTimeout(f),f=null,v=1,t.val(t.$.val())):t.$.val()>t.o.max&&t.$.val(t.o.max)||t.$.val()<t.o.min&&t.$.val(t.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",h),this.$.bind("mousewheel DOMMouseScroll",h)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=c(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(this.w*3/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/t>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(this.o.format(t))},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(t){var i,s;return t=this.angle(t),this.o.flip?(i=this.endAngle+1e-5,s=i-t-1e-5):(i=this.startAngle-1e-5,s=i+t+1e-5),this.o.cursor&&(i=s-this.cursorExt)&&(s=s+this.cursorExt),{s:i,e:s,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var t=this.g,i=this.arc(this.cv),s,h=1;t.lineWidth=this.lineWidth,t.lineCap=this.lineCap,this.o.bgColor!=="none"&&(t.beginPath(),t.strokeStyle=this.o.bgColor,t.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),t.stroke()),this.o.displayPrevious&&(s=this.arc(this.v),t.beginPath(),t.strokeStyle=this.pColor,t.arc(this.xy,this.xy,this.radius,s.s,s.e,s.d),t.stroke(),h=this.cv==this.v),t.beginPath(),t.strokeStyle=h?this.o.fgColor:this.fgColor,t.arc(this.xy,this.xy,this.radius,i.s,i.e,i.d),t.stroke()},this.cancel=function(){this.val(this.v)}},a.fn.dial=a.fn.knob=function(t){return this.each(function(){var i=new o.Dial;i.o=t,i.$=a(this),i.run()}).parent()}});
